# Workflow Documentationnn## OverviewnnThe PRP workflow is a **three-step process** that ensures proper project setup and PRP generation. Each step must complete successfully before proceeding to the next.nn## Workflow Stepsnn### üîÑ Step 1: Read Context (`step-1-read-context.sh`)nn**Purpose:** Parse and validate project context from `initial.md`nn**What it does:**n- Checks if `initial.md` existsn- Validates required fields (Language, Purpose)n- Extracts key project informationn- Ensures context is complete and validnn**Required fields in initial.md:**n```markdownnLanguage: [your-language]nPurpose: [project-purpose]nFramework: [framework-if-applicable]nKey Requirements: [list-of-requirements]nTechnical Constraints: [list-of-constraints]nSuccess Criteria: [measurable-criteria]n```nn**Success criteria:**n- ‚úÖ `initial.md` file existsn- ‚úÖ Language field is specifiedn- ‚úÖ Purpose field is specifiedn- ‚úÖ No critical validation errorsnn**Error handling:**n- Exits with error code 1 if validation failsn- Provides clear error messagesn- Suggests fixes for common issuesnn### üîÑ Step 2: Update Template (`step-2-update-template.sh`)nn**Purpose:** Adapt the base PRP template for the project's language and contextnn**What it does:**n- Detects project language from `initial.md`n- Loads appropriate language-specific hintsn- Updates base template with language patternsn- Creates versioned templates for reusenn**Language detection:**n- Reads Language field from `initial.md`n- Maps to available language hintsn- Falls back to common patterns if neededn- Supports: Python, Next.js, Rust, Go, Java, Ruby, PHPnn**Template updates:**n- Adds language-specific sectionsn- Includes common patterns and structuresn- Provides testing and error handling examplesn- Maintains universal best practicesnn**Success criteria:**n- ‚úÖ Language detected successfullyn- ‚úÖ Template updated with language patternsn- ‚úÖ Versioned template created (if new language)n- ‚úÖ No critical errors during update processnn**Error handling:**n- Exits if template update failsn- Provides language detection feedbackn- Logs template modification stepsnn### üîÑ Step 3: Create PRP (`step-3-create-prp.sh`)nn**Purpose:** Generate the final project-specific PRP documentnn**What it does:**n- Combines updated template with project contextn- Replaces all placeholders with actual contentn- Extracts requirements and constraintsn- Creates project metadata and backupsnn**Content generation:**n- Project name and basic informationn- Language and framework detailsn- Key requirements from `initial.md`n- Technical constraints and success criterian- Implementation phases and tasksn- Validation gates and quality checksnn**File outputs:**n- `[project-name].prp` - Main PRP documentn- `project-metadata.json` - Project informationn- `backups/` - Timestamped PRP backupsn- Template version trackingnn**Success criteria:**n- ‚úÖ PRP file generated successfullyn- ‚úÖ All placeholders replacedn- ‚úÖ Project metadata createdn- ‚úÖ Backup files generatedn- ‚úÖ File validation passednn**Error handling:**n- Exits if PRP generation failsn- Warns about remaining placeholdersn- Provides detailed error contextn- Maintains backup safetynn## Workflow Orchestrationnn### Main Workflow (`enforce-prp-workflow.sh`)nn**Purpose:** Coordinate all workflow steps and ensure proper execution ordernn**What it does:**n- Validates project directory structuren- Executes steps in correct sequencen- Provides progress feedbackn- Handles step failures gracefullynn**Execution flow:**n```bashn# Check prerequisitesnif [ ! -f "initial.md" ]; thenn    echo "‚ùå ERROR: Not in a project directory!"n    exit 1nfinnecho "üìã Workflow Steps:"necho "1. Read project context from initial.md"necho "2. Update base PRP template for project language"necho "3. Create project-specific PRP"necho ""nn# Execute each step in sequencen./workflows/step-1-read-context.sh || exit 1n./workflows/step-2-update-template.sh || exit 1n./workflows/step-3-create-prp.sh || exit 1nn# Validate workflow completionn./workflows/validate-workflow.shn```nn**Error handling:**n- Exits immediately if any step failsn- Provides clear error contextn- Maintains workflow state integrityn- Suggests recovery actionsnn### Validation (`validate-workflow.sh`)nn**Purpose:** Ensure all workflow steps completed successfullynn**What it does:**n- Checks for required output filesn- Validates file contents and structuren- Confirms workflow completionn- Provides validation summarynn**Required files:**n- `initial.md` - Project contextn- `templates/prp-base-updated.md` - Updated templaten- `*.prp` - Generated PRP documentnn**Validation checks:**n- File existence and accessibilityn- Content completenessn- Structure integrityn- Metadata consistencynn**Success criteria:**n- ‚úÖ All required files presentn- ‚úÖ File contents validn- ‚úÖ Workflow state consistentn- ‚úÖ No critical validation errorsnn## Workflow Statesnn### State 1: Initial Setupn- Project directory createdn- Template files copiedn- `initial.md` needs to be created/editednn### State 2: Context Readyn- `initial.md` contains project detailsn- Ready to run workflown- All prerequisites metnn### State 3: Template Updatedn- Base template adapted for languagen- Language-specific patterns addedn- Ready for PRP generationnn### State 4: PRP Generatedn- Project-specific PRP createdn- All placeholders replacedn- Ready for implementationnn### State 5: Workflow Completen- All steps completed successfullyn- Validation passedn- Project ready for developmentnn## Error Recoverynn### Step Failure RecoverynnIf any step fails:n1. **Check error messages** for specific issuesn2. **Fix the problem** (missing files, permissions, etc.)n3. **Re-run the workflow** from the beginningn4. **Verify prerequisites** are metnn### Partial Completion RecoverynnIf workflow stops partway:n1. **Check current state** using validation scriptn2. **Identify last successful step**n3. **Fix any issues** that caused failuren4. **Continue from failed step** or restart workflownn### Data Loss Preventionnn- **Automatic backups** created at each stepn- **Template versioning** preserves language-specific patternsn- **Project metadata** tracks workflow progressn- **Validation checks** prevent incomplete statesnn## Customizationnn### Adding New Stepsnn1. Create new step script in `workflows/` directoryn2. Follow naming convention: `step-N-description.sh`n3. Implement proper error handling and exit codesn4. Update main workflow to include new stepn5. Add validation checks for new step outputsnn### Modifying Existing Stepsnn1. **Backup current step** before modificationn2. **Test changes** with sample projectsn3. **Update documentation** to reflect changesn4. **Maintain backward compatibility** when possiblen5. **Version control** all modificationsnn### Workflow Extensionsnn- **Parallel execution** for independent stepsn- **Conditional steps** based on project typen- **Integration hooks** for external toolsn- **Custom validation** rules and checksn- **Reporting and analytics** for workflow metricsnn## Best Practicesnn### Workflow Designnn- **Keep steps atomic** and focusedn- **Clear dependencies** between stepsn- **Consistent error handling** across all stepsn- **Comprehensive validation** at each stagen- **Detailed logging** for debuggingnn### Error Handlingnn- **Fail fast** on critical errorsn- **Provide clear error messages**n- **Suggest recovery actions**n- **Maintain data integrity**n- **Log all error conditions**nn### User Experiencenn- **Clear progress indicators**n- **Helpful error messages**n- **Simple recovery procedures**n- **Comprehensive documentation**n- **Example projects** for reference