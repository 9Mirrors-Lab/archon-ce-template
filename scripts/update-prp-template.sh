#!/bin/bashn# update-prp-template.sh - Update base PRP template for project contextnnif [ -z "$1" ]; thenn    echo "âŒ ERROR: Language parameter required"n    echo "Usage: ./update-prp-template.sh <language>"n    exit 1nfinnLANGUAGE="$1"necho "ğŸ”„ Updating PRP template for $LANGUAGE..."nn# Check if base template existsnif [ ! -f "templates/prp-base.md" ]; thenn    echo "âŒ ERROR: Base PRP template not found!"n    echo "   Expected: templates/prp-base.md"n    exit 1nfinn# Check if language hints existnLANGUAGE_HINTS="templates/language-hints/$LANGUAGE.md"nif [ ! -f "$LANGUAGE_HINTS" ]; thenn    echo "   âš ï¸  No specific hints for $LANGUAGE, using common patterns"n    LANGUAGE_HINTS="templates/language-hints/common.md"nfinn# Create updated template directorynmkdir -p "templates/updated"nn# Copy base template to updated versionncp "templates/prp-base.md" "templates/prp-base-updated.md"nn# Extract language-specific patterns and update templatenif [ -f "$LANGUAGE_HINTS" ]; thenn    echo "   ğŸ“ Applying $LANGUAGE-specific patterns..."n    n    # Add language-specific sections to the updated templaten    cat >> "templates/prp-base-updated.md" << EOFnn## ğŸ¯ Language-Specific Patterns for $LANGUAGEnEOFn    n    # Extract and add relevant patternsn    if grep -q "Common Patterns" "$LANGUAGE_HINTS"; thenn        echo "   âœ… Added common patterns"n        sed -n "/^## Common Patterns/,/^## /p" "$LANGUAGE_HINTS" | head -n -1 >> "templates/prp-base-updated.md"n    fi n    n    if grep -q "Project Structure" "$LANGUAGE_HINTS"; thenn        echo "   âœ… Added project structure"n        sed -n "/^## Project Structure/,/^## /p" "$LANGUAGE_HINTS" | head -n -1 >> "templates/prp-base-updated.md"n    fi n    n    if grep -q "Common Dependencies" "$LANGUAGE_HINTS"; thenn        echo "   âœ… Added common dependencies"n        sed -n "/^## Common Dependencies/,/^## /p" "$LANGUAGE_HINTS" | head -n -1 >> "templates/prp-base-updated.md"n    fi n    n    if grep -q "Testing Patterns" "$LANGUAGE_HINTS"; thenn        echo "   âœ… Added testing patterns"n        sed -n "/^## Testing Patterns/,/^## /p" "$LANGUAGE_HINTS" | head -n -1 >> "templates/prp-base-updated.md"n    fi n    n    if grep -q "Error Handling Patterns" "$LANGUAGE_HINTS"; thenn        echo "   âœ… Added error handling patterns"n        sed -n "/^## Error Handling Patterns/,/^## /p" "$LANGUAGE_HINTS" | head -n -1 >> "templates/prp-base-updated.md"n    fi nfi nn# Add common patterns if not already addednif [ "$LANGUAGE" != "COMMON" ] && [ -f "templates/language-hints/common.md" ]; thenn    echo "   ğŸ“ Adding universal best practices..."n    cat >> "templates/prp-base-updated.md" << EOFnn## ğŸŒŸ Universal Best PracticesnEOFn    sed -n "/^## Universal Best Practices/,/^## /p" "templates/language-hints/common.md" | head -n -1 >> "templates/prp-base-updated.md"nfi nn# Update template metadatanecho "   ğŸ“ Updating template metadata..."nCURRENT_DATE=$(date +%Y-%m-%d)nsed -i "s/[LANGUAGE]/$LANGUAGE/g" "templates/prp-base-updated.md"nsed -i "s/[DATE]/$CURRENT_DATE/g" "templates/prp-base-updated.md"nsed -i "s/[FRAMEWORK]/$(echo $LANGUAGE | tr '[:upper:]' '[:lower:]')/g" "templates/prp-base-updated.md"nn# Create versioned template if significant changesnif [ ! -d "templates/versioned-templates" ]; thennmkdir -p "templates/versioned-templates"nfi nn# Check if this is a new language or significant updatenif [ ! -f "templates/versioned-templates/$LANGUAGE-template-v1.md" ]; thenn    echo "   ğŸ’¾ Creating versioned template for $LANGUAGE..."n    cp "templates/prp-base-updated.md" "templates/versioned-templates/$LANGUAGE-template-v1.md"n    echo "   âœ… Saved as: $LANGUAGE-template-v1.md"nfinnif [ $? -eq 0 ]; thenn    echo "âœ… PRP template updated successfully for $LANGUAGE"n    echo "   ğŸ“„ Updated template: templates/prp-base-updated.md"n    if [ -f "templates/versioned-templates/$LANGUAGE-template-v1.md" ]; thenn        echo "   ğŸ’¾ Versioned template: templates/versioned-templates/$LANGUAGE-template-v1.md"n    fi nelsen    echo "âŒ ERROR: Failed to update PRP template"n    exit 1nfi