---ndescription: PRP Execution Rules - Implementation and validation workflownglobs: ["**/*.md", "**/*.mdx", "**/*.txt"]nalwaysApply: falsen---nn# PRP Execution Rules - Implementation and Validation Workflownn## Core Execution Workflownn**MANDATORY: Always follow this exact sequence:**nn1. **Parse PRP** - Read and validate PRP documentn2. **Analyze Dependencies** - Determine task execution ordern3. **Check Prerequisites** - Verify environment and dependenciesn4. **Execute Tasks** - Follow implementation blueprint step-by-stepn5. **Validate Results** - Run validation loops at each leveln6. **Update Progress** - Track completion statusn7. **Generate Report** - Create execution summarynn## PRP Parsing Standardsnn### Required PRP Elementsnn**Before execution, verify PRP contains:**n- Complete implementation blueprintn- Ordered task dependenciesn- Pattern references with exact file pathsn- Validation loop specificationsn- Anti-pattern documentationn- Success criteria definitionsnn### Context Validationnn**Ensure execution context is complete:**n- All referenced files exist and are accessiblen- Pattern files contain expected structuresn- Dependencies are properly installedn- Environment variables are configuredn- Database connections are establishednn## Task Execution Standardsnn### Task Order Enforcementnn**Execute tasks in dependency order:**n1. **Data Models** (Task 1) - Foundation for all other tasksn2. **Services** (Task 2) - Business logic implementationn3. **Tools/APIs** (Task 3) - External interface creationn4. **Integration** (Task 4) - System-wide connectionsn5. **Testing** (Task 5-6) - Quality assurancenn### Implementation Patternsnn**For each task, follow these steps:**n1. **Read pattern file** - Understand the structure to follown2. **Create new file** - Use exact naming and placementn3. **Implement functionality** - Follow pattern exactlyn4. **Run Level 1 validation** - Syntax, style, type checkingn5. **Verify integration** - Ensure dependencies are satisfiedn6. **Document changes** - Update any relevant documentationnn### File Creation Standardsnn**When creating new files:**n- Use exact paths specified in PRPn- Follow naming conventions exactlyn- Implement all required methods/classesn- Include proper imports and dependenciesn- Add comprehensive error handlingn- Follow existing code stylenn## Validation Loop Executionnn### Level 1: Syntax & Style (Immediate)nn**Run after each file creation:**n```bashnruff check src/{new_files} --fix     # Auto-format and fix lintingnmypy src/{new_files}                 # Type checkingnruff format src/{new_files}          # Consistent formattingn```nn**Expected:** Zero errors. Fix all issues before proceeding.nn### Level 2: Unit Tests (Component)nn**Test each component as created:**n```bashnuv run pytest src/services/tests/test_{domain}_service.py -vnuv run pytest src/tools/tests/test_{action}_{resource}.py -vn```nn**Expected:** All tests pass. Debug failures before continuing.nn### Level 3: Integration Testing (System)nn**Validate system integration:**n```bashn# Service startupnuv run python main.py &nsleep 3nn# Health checksncurl -f http://localhost:8000/healthnn# Feature endpointsncurl -X POST http://localhost:8000/{endpoint} -H "Content-Type: application/json" -d '{"test": "data"}'n```nn**Expected:** All integrations working, proper responses.nn### Level 4: Creative Validation (Domain)nn**Run domain-specific tests:**n```bashn# Performance testingnab -n 100 -c 10 http://localhost:8000/{endpoint}nn# Security scanningnbandit -r src/nn# Load testingn# wrk -t12 -c400 -d30s http://localhost:8000/{endpoint}n```nn**Expected:** All creative validations pass.nn## Error Handling During Executionnn### Task Failure Recoverynn**If a task fails:**n1. **Stop execution** immediatelyn2. **Analyze error** - Check logs, validation outputn3. **Fix root cause** - Don't work around issuesn4. **Re-run validation** - Ensure fix is completen5. **Resume execution** - Continue from failed tasknn### Pattern Mismatch Handlingnn**If pattern doesn't match expected:**n1. **Analyze existing codebase** - Understand actual patternsn2. **Update PRP** - Document discovered patternsn3. **Adjust implementation** - Follow actual patternsn4. **Document changes** - Update pattern referencesn5. **Continue execution** - Resume with corrected approachnn### Validation Failure Recoverynn**If validation fails:**n1. **Read error output** - Understand what failedn2. **Fix implementation** - Address root causen3. **Re-run validation** - Verify fix worksn4. **Document lessons** - Update PRP if neededn5. **Continue execution** - Resume validation loopnn## Progress Trackingnn### Task Status Updatesnn**Track each task:**n- [ ] **Not Started** - Task identified but not begunn- [x] **In Progress** - Task actively being worked onn- [x] **Completed** - Task finished and validatedn- [x] **Blocked** - Task waiting for dependencyn- [x] **Failed** - Task encountered error (document reason)nn### Completion Validationnn**Task is complete when:**n- All implementation requirements metn- Level 1 validation passesn- Dependencies are satisfiedn- Integration points workn- Documentation is updatednn## Quality Assurancenn### Code Quality Standardsnn**Maintain throughout execution:**n- Follow existing naming conventionsn- Use established error handling patternsn- Maintain consistent code stylen- Include comprehensive loggingn- Add proper type hintsn- Document complex logicnn### Testing Standardsnn**Ensure comprehensive coverage:**n- Unit tests for all public methodsn- Integration tests for workflowsn- Error case testingn- Performance validationn- Security verificationn- Edge case coveragenn## Integration with Archon Workflownn**When using with Archon CE Template:**n1. **Workflow scripts** provide execution structuren2. **Advanced template** guides implementationn3. **Validation loops** ensure qualityn4. **Cursor rules** enhance IDE experiencen5. **Progress tracking** maintains visibilitynn## Success Metricsnn**Execution is successful when:**n- All tasks completed successfullyn- All validation levels passedn- Integration points workingn- Performance requirements metn- Security requirements satisfiedn- Documentation completenn## Final Validationnn**Before marking complete:**n1. **Run full test suite** - All tests passingn2. **Validate all endpoints** - System integration workingn3. **Check performance** - Meets specified requirementsn4. **Verify security** - No vulnerabilities introducedn5. **Update documentation** - Reflects final implementationn6. **Archive PRP** - Mark as completed successfullynn## Anti-Patterns During Executionnn**Avoid these execution mistakes:**n- ❌ Skipping validation stepsn- ❌ Working around errors instead of fixingn- ❌ Ignoring failing testsn- ❌ Deviating from established patternsn- ❌ Rushing through implementationn- ❌ Skipping documentation updatesnn## Recovery Proceduresnn**If execution goes off track:**n1. **Assess current state** - What's working, what's brokenn2. **Identify deviation point** - Where did execution divergen3. **Plan recovery** - How to get back on trackn4. **Execute recovery** - Fix issues systematicallyn5. **Validate recovery** - Ensure system is stablen6. **Resume execution** - Continue from stable pointnn## Documentation Requirementsnn**During execution, maintain:**n- Task completion statusn- Validation resultsn- Error logs and resolutionsn- Pattern discoveriesn- Integration notesn- Performance metricsnn**After completion:**n- Final implementation summaryn- Validation results summaryn- Performance benchmarksn- Security assessmentn- Deployment notesn- Maintenance requirements